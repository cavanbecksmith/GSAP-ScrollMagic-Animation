var App={controller:new ScrollMagic.Controller,tl:new TimelineMax({paused:!1,force3D:!0}),trigger:$(".trigger"),phones:{container:$("._3_mobiles"),el:$(".phone"),originalW:240,originalH:480,newW:null,newH:null,centerW:null},browserWin:{container:$("._3_mobiles"),el:$("._1_browser_window"),marginT:null,originalW:null,originalH:null,centerW:null},icons:{container:$("._3_mobiles"),els:$(".icon"),img:$(".icon img"),el:$(".icon_set_1"),centerH:null},icons_2:{container:$("._3_mobiles"),els:$(".icon"),img:$(".icon img"),el:$(".icon_set_2"),centerH:null},VRGoggles:{el:$(".VRGoggles"),container:$("._3_mobiles"),marginT:null,originalW:null,originalH:null},devices:{small:{size:500,percentage:.4},medium:{size:650,percentage:.6}},init:function(){this.setupScenes()},resize:function(){this.isMobile(),this.getPhonesCenter(),this.setPhoneCenter(),this.setBrowserWin(),this.resetBrowserWin(),this.centerIconsH(),this.resetIcons(),this.setVRGoggles(),this.setFinalTransition()},createScene:function(i){(i=i||{}).pin=i.hasOwnProperty("pin")?i.pin:null,i.tl=i.hasOwnProperty("tl")?i.tl:null,i.duration=i.hasOwnProperty("duration")?i.duration:null,i.offset=i.hasOwnProperty("offset")?i.offset:0;new ScrollMagic.Scene({triggerElement:this.trigger,duration:i.duration}).setTween(i.tl).addIndicators().setPin(i.pin).addTo(this.controller).reverse(!0).offset(i.offset)},setupScenes:function(){var i=this.scene_01();this.createScene({tl:i,pin:$("._3_mobiles_pin"),duration:2e3,offset:500})},scene_01:function(){return this.tl.addLabel("Start").to({},2,{}).addLabel("TransitionTo3").to({},2,{}).addLabel("CollapsePhones").to({},2,{}).addLabel("MobileZoom").to({},.1,{}).addLabel("IconsIn").to({},2,{}).addLabel("ZoomVRGoggles").to({},2,{}).addLabel("FinalTransition"),this.setPhoneCenter(this.tl,"Start"),this.splitPhones(this.tl,"TransitionTo3"),this.collapsePhones(this.tl,"CollapsePhones"),this.mobileZoom(this.tl,"MobileZoom"),this.iconsIn(this.tl,"IconsIn"),this.zoomVRGoggles(this.tl,"ZoomVRGoggles"),this.finalTransition(this.tl,"FinalTransition"),this.tl.progress(1).progress(0),this.tl},isMobile:function(){var i=$(window).width(),e={size:500,percentage:.6},t={size:650,percentage:.6},s=this;i<e.size?(s.phones.el.css({width:s.phones.originalW*e.percentage,height:s.phones.originalH*e.percentage}),s.phones.newW=s.phones.originalW*e.percentage,s.phones.newH=s.phones.originalH*e.percentage):i<t.size?(s.phones.el.css({width:s.phones.originalW*t.percentage,height:s.phones.originalH*t.percentage}),s.phones.newW=s.phones.originalW*t.percentage,s.phones.newH=s.phones.originalH*t.percentage):(s.phones.el.css({width:s.phones.originalW,height:s.phones.originalH}),s.phones.newW=s.phones.originalW,s.phones.newH=s.phones.originalH)},getPhonesCenter:function(){var i=$("._3_mobiles").width(),e=$("._3_mobiles").height(),t=this.phones.el.width(),s=this.phones.el.height();return this.phones.centerW=(i-t)/2,this.phones.centerH=(e-s)/2,(i-t)/2},setPhoneCenter:function(i,e){TweenMax.set(this.phones.el,{left:this.phones.centerW})},splitPhones:function(i,e){var t=this.getSplitPhones();this.phones.el.each(function(s){i.to($(this),1,{left:t[s].transitionTo},e)})},collapsePhones:function(i,e){this.browserWin.el;var t=this.browserWin.originalH,s=(this.browserWin.originalW,this.browserWin.marginT),n=this.phones.el.height(),o=(this.phones.el.css("margin-top").replace("px",""),Number),h=$(window).width();return h<this.devices.small.size?(o=Number(t)+Number(s-n/1.25-24),this.tl.to(this.phones.el,1,{css:{width:this.phones.newW/1.25,height:this.phones.newH/1.25,left:18,marginTop:o}},e).to(this.browserWin.el,1,{css:{width:"100%",height:"auto",marginTop:s}},e)):h<this.devices.medium.size?(o=Number(t)+Number(s-n/1.3-24),this.tl.to(this.phones.el,1,{css:{width:this.phones.newW/1.3,height:this.phones.newH/1.3,left:18,marginTop:o}},e).to(this.browserWin.el,1,{css:{width:"100%",height:"auto",marginTop:s}},e)):(o=Number(t)+Number(s-n/2-24),this.tl.to(this.phones.el,1,{css:{width:this.phones.newW/2,height:this.phones.newH/2,left:18,marginTop:o}},e).to(this.browserWin.el,1,{css:{width:"100%",height:"auto",marginTop:s}},e)),this.tl},mobileZoom:function(i,e){return console.log(this.phones.centerH),this.tl.set(this.phones.el[0],{opacity:0},e).set(this.phones.el[2],{opacity:0},e).to(this.browserWin.el,1,{opacity:0},e).to(this.phones.el,1,{css:{scaleX:10.01,scaleY:10.01,opacity:0,top:0,left:0,x:this.phones.centerW,z:.01,force3D:!0}},e),this.tl},iconsIn:function(i,e){return this.tl.set(this.icons.el,{top:this.icons.centerH}).to(this.icons.el,1,{opacity:1,width:"100%",height:"auto"},e),this.tl},centerIconsH:function(){return this.icons.centerH=this.icons.container.height()/2-this.icons.el.height()/2,this.icons.centerH},resetIcons:function(){TweenMax.set(this.icons.el,{top:this.icons.container.height()/2-this.icons.el.height()/2}),TweenMax.set(this.icons.el,{opacity:0,width:0,height:0})},hideEl:function(i){TweenMax.set(i,{opacity:0})},getBrowserWin:function(){return{width:this.browserWin.originalW,height:this.browserWin.originalH}},setBrowserWin:function(){this.browserWin.originalW=this.browserWin.el.width(),this.browserWin.originalH=this.browserWin.el.height(),this.browserWin.marginT=this.browserWin.el.css("margin-top").replace("px","")},resetBrowserWin:function(){TweenMax.set(this.browserWin.el,{css:{marginTop:2*this.browserWin.marginT,width:0,height:0}})},getSplitPhones:function(){var i=["left","center","right"],e=[];return this.phones.el.each(function(t){var s,n=$(this).width();switch(i[t]){case"left":s=Number($(this).css("left").replace("px",""))-(n+80);break;case"right":s=Number($(this).css("left").replace("px",""))+(n+80);break;case"center":s=$(this).css("left")}e.push({name:i[t],transitionTo:s,el:$(this)})}),e},zoomVRGoggles:function(i,e){return this.tl.to(this.VRGoggles.el,1,{css:{width:this.VRGoggles.originalW,height:this.VRGoggles.originalH,left:0,marginTop:this.VRGoggles.marginT+80,marginLeft:0,opacity:1}},e).to(this.icons.el,1,{css:{width:0,height:0,opacity:0,marginTop:300,marginLeft:140,force3D:!0}},e+"+=0.2"),this.tl},setVRGoggles:function(){this.VRGoggles.originalH=this.VRGoggles.el.height(),this.VRGoggles.originalW=this.VRGoggles.el.width(),this.VRGoggles.marginT=Number(this.VRGoggles.el.css("margin-top").replace("px","")),TweenMax.set(this.VRGoggles.el,{css:{width:6*this.VRGoggles.originalW,height:6*this.VRGoggles.originalH,left:"-100%",marginTop:this.VRGoggles.container.height()/2-2*this.VRGoggles.originalH,marginLeft:this.VRGoggles.container.width()/2-this.VRGoggles.originalW,opacity:0,z:.01}})},finalTransition:function(i,e){return this.tl.to(this.VRGoggles.el,1,{width:.5*this.VRGoggles.originalW,height:.5*this.VRGoggles.originalH,left:this.VRGoggles.container.width()/2-.5*this.VRGoggles.originalW/2},e).set(this.icons_2.el,{opacity:1,left:0},e).set(this.icons.el,{top:"-10%"},e).to(this.icons.el,1,{y:this.icons.container.height()/2-this.icons.el.height()/2},e).to(this.icons_2.el,1,{x:this.icons_2.container.width()/2-.6*this.icons_2.originalW/2,y:this.icons_2.container.height()/2-.6*this.icons_2.originalH/2-100},e),this.tl},setFinalTransition:function(i,e){this.icons_2.originalW=this.icons_2.el.width(),this.icons_2.originalH=this.icons_2.el.height(),TweenMax.set(this.icons_2.el,{width:.6*this.icons_2.originalW,height:.6*this.icons_2.originalH,opacity:0,top:"-100%",left:this.icons_2.container.width()/2-.6*this.icons_2.originalW/2})}};function log(i){console.log("------------"),console.log(i)}document.addEventListener("DOMContentLoaded",function(i){window.onload=function(){App.resize(),setTimeout(function(){App.init()},500)}}),$(window).resize(function(){App.resize()});